<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="plugfabrique.css"/>
  </head>

  <body>

    <div id="gxBaseContenu"></div>

    <button>clique test</button>

    <div class="contenu">
      <p>menu</p>
    </div>
    <span class="right">
      <ul>
        <li class="navbtn shopbtn"><a href="#" id="scriptOnglet" class="boutons anim">Rejoindre le site</a></li>
      </ul>
    </span>

    <script src="script.js"></script>
    <script>
      function testOtherDomain(url)
      {
        var xhr = new XMLHttpRequest;

        xhr.onload = function(){
          var texteRecup = xhr.responseXML;
          tags = texteRecup.getElementsByTagName("item");
          //console.log(tags.length);
          for (i = 0; i < tags.length; i++)
          {
            title = tags[i].getElementsByTagName("title");
            link = tags[i].getElementsByTagName("link");
            description = tags[i].getElementsByTagName("description");
            comments = tags[i].getElementsByTagName("comments");
            category = tags[i].getElementsByTagName("category");
            pubDate = tags[i].getElementsByTagName("pubDate");
            auteur = tags[i].getElementsByTagName("dc:creator");
            guid = tags[i].getElementsByTagName("guid");
            //document.write(title[0].childNodes[0].nodeValue);

            tabItem = [title, link, description, comments, category, pubDate, auteur, guid];
            getExistDiv = document.querySelector("#gxBaseContenu");
            createDiv = document.createElement("div"+i);

            for (j = 0; j < tabItem.length; j++)
            {
              if(tabItem[j] == description)
              {
                document.write(tabItem[j][0].childNodes[0].nodeValue);
                //console.log(maStr.indexOf("<p>", 1));
                //console.log(tabItem[j][0].childNodes[0].nodeValue);
                //document.write(tabItem[j][0].childNodes[0].nodeValue);
                //document.close();

                //trouver un moyen de supprimer ce qu'il y a entre < >, eux y compris

              }
              var createPara = document.createElement("p");
              var createTextNode = document.createTextNode(tabItem[j][0].childNodes[0].nodeValue);
              createPara.appendChild(createTextNode);
              createDiv.appendChild(createPara);
              getExistDiv.appendChild(createDiv);
            }
          }
        }
        xhr.open("GET", url);
        xhr.send();
      }


/*document.write(title.childNodes[0].nodeValue);
z = x[1].getElementsByTagName("title");
for (i = 0; i < z.length; i++)
{
  in_title += z[i].childNodes[0].nodeValue + "separation !";
}
document.write(in_title);
console.log(x[1]);*/


    </script>

    <script>
    //var url = 'http://51.255.196.206/greg/testXHR/rss.xml';
      var buttonClick = document.querySelector('body button');
      buttonClick.addEventListener("click", function(e){
        testOtherDomain('http://51.255.196.206/greg/testXHR/rss.xml');
      }, false);
    </script>

  </body>

</html>
